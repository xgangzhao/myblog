---
title: C++对象的内存布局
date: 2025-11-23 19:56:27
tags: [C++]
---

> 依然来自公众号腾讯技术工程。用GDB来分析对象的内存布局，在此简单记录一些重要结论

1. C++中，一个对象的成员变量的内存布局是连续的（有字节对齐），会按照声明的顺序存储
2. 所有成员方法，包括静态方法，都放在进程的.text段，不会占用对象实例的内存空间
3. 尽管编译期间不能访问私有成员变量/方法，但运行期间仍然可以通过地址偏移来访问
4. 已经初始化（不为0）的全局变量或者静态变量，放在进程的.data段
5. 未初始化的全局变量或者静态变量，放在进程的.bss段
6. 有继承关系，基类和子类的布局连在一起
7. 有虚函数的继承，内存布局中会多出一个虚表指针
8. 虚函数表，所有对象实例共享，即每个多态类一份，编译器会在编译时创建（不同编译器可能会有不同）
